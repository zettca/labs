(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(29)},16:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),i=n.n(r),c=(n(16),n(4)),s=n(5),u=n(7),l=n(6),d=n(8),f=n(2),h=n(3),g=n.n(h),v=["January","February","March","April","May","June","July","August","September","October","November","December"],w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function m(e){return e>9?e:"0"+e}function p(e){var t=e||new Date;return[t.getHours(),t.getMinutes()].map(m).join(":")}function b(e){var t=e||new Date;return"".concat(t.getDate()," ").concat(v[t.getMonth()].slice(0,3))}var y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.day,n=e.data;if(!n)return null;var a=n.events,r=p(),i=[],c=null;return a.forEach(function(e){e.weekday===w[t].slice(0,3)&&(r<e.start||w[t]!==w[(new Date).getDay()]?i.push(e):r>=e.start&&r<=e.end&&(i.push(e),c=e))}),i.sort(function(e,t){return e.start<t.start?-1:1}),o.a.createElement("div",null,o.a.createElement("h3",{className:c?"red":i.length?"blue":"green"},n.name),i.map(function(e,t){return o.a.createElement("span",{key:t},o.a.createElement("strong",null,e.start," \u2013 ",e.end)," ",e.course.acronym.replace(/[^A-Za-z]/g,""))}))}}]),t}(o.a.PureComponent),D=(n(28),[220,221,222,227,229,166].map(function(e){return"2448131365"+e})),k=function(e){function t(e){var n;Object(c.a)(this,t),n=Object(u.a)(this,Object(l.a)(t).call(this,e));var a=g.a.get("labs")||D;return g.a.set("labs",a),n.state={date:b(),time:p(),dow:(new Date).getDay(),labs:a.map(function(e){return{id:e,data:null}})},n.nextDay=n.nextDay.bind(Object(f.a)(Object(f.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.labs,n=function(e){var t=e||new Date;return[t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()].map(m).join("-")}(function(e){var t=e||new Date,n=t.getDay(),a=0===t.getDay()?7:n;return new Date((new Date).setDate(t.getDate()-a+1))}());t.forEach(function(a){var o="".concat(a.id,"_").concat(n),r=g.a.get(o);void 0!==r?(console.log("Hit localStorage for "+o),a.data=r,e.setState({labs:t})):fetch("https://web.tecnico.ulisboa.pt/~ist178013/api/labevents/?lab="+a.id).then(function(e){return e.json()}).then(function(n){a.data=n,g.a.set(o,n),e.setState({labs:t})})})}},{key:"nextDay",value:function(){var e=this.state.dow,t=new Date,n=(e>=5?0:e)+1;t.setDate(t.getDate()+(n-t.getDay())),this.setState({date:b(t),time:p(),dow:n})}},{key:"render",value:function(){var e=this.state,t=e.dow,n=e.date,a=e.time,r=e.labs;return o.a.createElement("main",null,o.a.createElement("header",{onClick:this.nextDay},o.a.createElement("h3",null,o.a.createElement("span",null,"".concat(w[t].slice(0,3),", ").concat(n)),o.a.createElement("span",{className:"right"},a))),o.a.createElement("section",{id:"infos"},r.map(function(e){return e.data&&o.a.createElement(y,{key:e.id,day:t,data:e.data})})))}}]),t}(o.a.Component),j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(o.a.createElement(k,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(".","/service-worker.js");j?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):E(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):E(e)})}}()}},[[11,1,2]]]);
//# sourceMappingURL=main.1469edb3.chunk.js.map